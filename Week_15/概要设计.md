# 概要设计

### 1、设计目标
- 实现在某一时刻，n个用户参与抢购活动



### 2、设计约束

- 保证大量并发请求时的服务可用性
- 保证不会出现超卖情况



### 3、设计原则

- 分层过滤请求处理数量
- 减少到达数据库层的读写数，尽量在前端完成处理
- 秒杀独立于原有系统，避免对原系统造成影响



### 4、设计实现

- 动静分离，页面静态化
- CDN缓存静态数据
- Nginx负载均衡
- MQ在到达
- 预热Redis商品库存数据，让请求尽量在缓存层处理
- 通过Redis+Lua的原子性，保证不会出现超卖



系统架构图
![image.png](https://cdn.nlark.com/yuque/0/2021/png/158075/1612063414604-e64a9aa1-2550-4d17-95e5-6ea85af2471c.png#align=left&display=inline&height=497&margin=%5Bobject%20Object%5D&name=image.png&originHeight=994&originWidth=1776&size=180181&status=done&style=none&width=888)




### 5、系统出错设计

- 缓存、MQ、Web服务、数据库多节点集群，防止单点故障
- 增加监控告警，实时了解各系统的资源消耗情况
- 限流，根据系统情况实时控制请求的量
- 降级，限制或关闭某些非核心功能
- 抢购失败响应请重试的页面或活动结束页面



### 6、系统安全设计

- 防重复下单



